{% extends 'my_base.html' %}
{% load staticfiles %}
{% load lbutils %}
{% load compress %}
{% load i18n %}
{% load crispy_forms_tags %}
{% block title %}
<style>
        body{
            margin:0;
        }
        ul{
            padding:0;
            margin:0;
            list-style: none;
        }
       tr,td{
           padding: 0 ;
            margin:0 ;
        }
        .tan_box{
            width:1200px ;
            height:800px ;
            border:1px solid #DCDCDC ;
            margin:0 auto ;
            position:fixed;
            top:53px;
            left:22%;
            z-index: 9999;
            background-color:#F8F8F8;

        }
        .top-title{
            height:55px !important;
            margin-left:15px;
        }
        .top-title p{
            font-size:14px ;
            font-family: "微软雅黑" ;
            color:#000;
            margin:0;
            line-height: 36px;
        }
        .form_control{
            width:200px ;
            height:25px ;
            outline:none;
            border:1px solid #B8B8B8;
            -moz-appearance:none; /* Firefox */
            -webkit-appearance:none; /* Safari 和 Chrome */
             background:#fff;
        }
        .content_table tr:nth-of-type(odd){
            background: #f0ffff !important;
        }
        .content_table tr:nth-of-type(even){
            background:#fff !important;
        }
        .content_table{
            margin-top:20px;
            border-left: #eeeeee solid 1px ;
            border-top:#eeeeee solid 1px ;
            border-collapse: collapse ;
            font-size:16px;
            font-family: "微软雅黑" ;
            padding:15px;
        }
        .number,.main{
            border:1px solid #f4f4f4 ;
            border-bottom:none ;
            height:45px ;
            font-family: "微软雅黑" ;
        }

        .table_main tr:hover{
            background:#00CC66 !important;
        }
        .number{
            width:550px;
        }
        .main{
            border-left:0 ;
            width:850px ;
        }
       .close_btn{
            width:50px;
            line-height:24px;
            color:#fff;
            text-align:center;
            background:#1E90FF;
            position: absolute;
            right:20px;
            top:20px;
        }
      .content_table .color{
          background:pink !important;
      }
    </style>
<h1 style="margin-top:-15px"><span style="color: #0b93d5;">定期工作策划</span>
    <small>新建</small>
</h1>
<ol class="breadcrumb" style="margin-top: 5px;">
    <li><a href="/systemsettings/starter/"><i class="fa fa-dashboard"></i>当前位置：首页</a></li>
    <li><span>技术监督</span></li>
    <li><span>定期工作管理</span></li>
    <li class="active">定期工作策划</li>
</ol>
{% endblock %}
{% block beiyong  %}
<a onClick="javascript :history.back(-1)" data-toggle="tooltip" data-placement="top"
   class="btn btn-primary glyphicon glyphicon-chevron-left" title="返回"></a>
{% endblock %}
{% block list_new %}
<a class="btn btn-primary glyphicon glyphicon-list" data-toggle="tooltip" data-placement="top" title="返回列表"
   href="/regularworkplan/list/?action=list&menuid=48"></a>
{% endblock %}

{% block save %}
<a class="btn btn-primary glyphicon glyphicon-floppy-save" title="保存" data-toggle="tooltip" data-placement="top"
  id="create_btn"></a>
{% endblock %}

{% block update %}
<a href="#" onClick="document.location.reload()" data-toggle="tooltip" data-placement="top"
   class="css3 btn btn-primary glyphicon glyphicon-refresh" title="刷新"></a>
{% endblock %}
{% block content %}
{% block right_side %}
<section class="content-header">
    {% include "incs/messages.html" %}
    {% block right_side_header %}
    <div class="right-btns">
        {% if wf_code %}
        <a target="_black" href="{% url 'wf_process_flowchart' wf_code %}">Flowchart</a>
        {% endif %}
    </div>
    {% endblock %}
</section>
<section class="content">
    <form id="id-m-form" action="" method="post" class="form-horizontal {% block form_css_class %}{% endblock %}" {% block form_ext_attr %}{% endblock %} role="form" enctype="multipart/form-data" >
        {% block right_side_content %}
        {% block right_side_content_top %}
        {% if object %}
        <div class="nav-tabs-custom">
            <ul class="nav nav-tabs" role="tablist" id="id-m-nav-tabs">
                <li class="active">
                    <a href="#id-tb-base" role="tab" data-toggle="tab">Base Information</a>
                </li>
                {% block right_side_tab_nav_ext %}
                {% endblock %}
                <li>
                    <a href="#id-tb-wf-log" role="tab" data-toggle="tab">Operate history</a>
                </li>
                <li>
                    <a href="#id-tb-wf-graph" role="tab" data-toggle="tab">Help</a>
                </li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane active" id="id-tb-base">
                    {% block right_side_tab_base_ctx %}
                    {% include "lbworkflow/inc_wf_status.html" %}
                    {% endblock %}
                </div>
                {% block right_side_tab_ctx_ext %}
                {% endblock %}
                <div class="tab-pane" id="id-tb-wf-log">
                    {% include "lbworkflow/inc_wf_history.html" %}
                </div>
                <div class="tab-pane" id="id-tb-wf-graph">
                    {% block flow_help %}
                    {% endblock %}
                    <a href="{% url 'wf_process_flowchart' process.code %}" target="_blank">Open in new window</a>
                    <br/>
                    <img src="{% url 'wf_process_flowchart' wf_code %}"/>
                </div>
            </div>
        </div>
        {% endif %}
        {% endblock %}

        <div class="box-body">
            <div class="form-group">
                <label class="col-md-2 control-label">KKS编码:</label>
                <div class="col-md-3">
                    <input type="text" class="form-control" name="KKS_code" id="KKS_code" readonly>
                    <!--<select class="form-control js-example-basic-single select2" onchange="kks_change()" name="KKS_code" id="KKS_code" >-->
                        <!--&lt;!&ndash;<option value="0"></option>&ndash;&gt;-->
                        <!--{% for kks in kks_list %}-->
                        <!--<option value="{{ kks.id }}" kks_codename="{{ kks.KKS_codename }}" >{{kks.KKS_code}}({{ kks.KKS_codename }})-->
                        <!--</option>-->
                            <!--{% endfor %}-->
                    <!--</select>-->
                </div>
                <div class="col-md-1">
            <span class="glyphicon glyphicon-search" style="cursor:pointer;" data-toggle="modal"
                  data-target="#kks"></span>
                </div>
                <label class="col-md-3 control-label ">KKS编码名称:</label>
                <div class="col-md-3">
                    <input type="text" class="form-control" name="KKS_codename" id="KKS_codename" readonly>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">业务来源:</label>
                <div class="col-md-3">
                    <select  id="resource" name="resource" class="form-control">
                        <option>技术监督</option>
                        <option>二十五项反措</option>
                        <option>技术监督+二十五项反措</option>
                    </select>
                </div>
                <label class="col-md-2 control-label col-md-offset-1">状&nbsp;态:</label>
                <div class="col-md-3">
                    <input type="text" id="state" name="state" class="form-control" value="拟定"  readonly>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="col-md-4 control-label">性&nbsp;质:</label>
                        <div class="col-md-6">
                            <select class="form-control" name="nature" id="nature">
                                <option value="运行">运行</option>
                                <option value="检修">检修</option>
                                <option value="管理">管理</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-group">
                        <label class="col-md-3 control-label col-md-offset-1">标准分值:</label>
                        <div class="col-md-6">
                            <!--<input type="text" class="form-control" name="score" id="score" onblur="check_score()">-->
                            <!--<span class="glyphicon glyphicon-remove-sign error" id="nine">请输入正确数字（非零正数）！</span>-->
                            <input type="text" class="form-control" name="score" id="score">
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="col-md-2 control-label"><span class="bt">*</span>定期工作类型:</label>
                <div class="col-md-3">
                    <select class="form-control select2" name="type" id="rtype">
                        <option value="技术监督设备类">技术监督设备类</option>
                        <option value="技术监督管理类">技术监督管理类</option>
                        <option value="25项反措设备类">25项反措设备类</option>
                        <option value="25项反措管理类">25项反措管理类</option>
                    </select>
                </div>
                <div class="col-md-6 col-md-offset-1">
                    <div class="form-group">
                        <label class="col-md-4 control-label"><span class="bt">*</span>提前提醒时间（天）:</label>
                        <div class="col-md-6">
                            <!--<input type="text" id="warinig_time" name="warinig_time" class="form-control"-->
                            <!--onblur="check_warinig_time()"/>-->
                            <!--<span class="glyphicon glyphicon-remove-sign error" id="two">请输入正确数字（非零正整数)！</span>-->
                            <input type="text" id="warinig_time" name="warinig_time" class="form-control">
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">设备专业:</label>
                <div class="col-md-3">
                    <select class="form-control select2  " name="equipment_major">
                        {% for equipment_major in equipment_major_list %}
                        <option value="{{equipment_major.id}}">{{equipment_major.name}}
                        </option>
                        {% endfor %}
                    </select>
                </div>
                <label class="col-md-2 control-label col-md-offset-1">监督专业:</label>
                <div class="col-md-3">
                    <select class="form-control select2" name="supervision_major">
                        {% for supervision_major in supervision_major_list %}
                        <option value="{{supervision_major.name}}">{{supervision_major.name}}
                        </option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"><span class="bt">*</span>工作项目:</label>
                <div class="col-md-9">
                    <textarea id="work_content" name="work_content" class="form-control" required></textarea>
                </div>
                <input type="text" id="num2" name="num2" style="display: none;"/>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="col-md-4 control-label ">责任人:</label>
                        <div class="col-md-6">
                            <!--<input type="text" id="exe_user" name="exe_user" class="form-control" readonly>-->
                             <select class="form-control js-example-basic-single select2" onchange="change()" name="exe_user" id="exe_user" >
                                 <!--<option value="0"></option>-->
                                 {% for user in user_list %}
                        <option value="{{ user.name }}" group="{% if user.group is None %}暂无责任组{% else %}{{ user.group }}{% endif %}" >{{user.name}}{% if user.group is None %}(暂无责任组){% else %}({{ user.group }}){% endif %}
                        </option>
                            {% endfor %}
                    </select>
                        </div>
                        <!--<div class="col-md-1">-->
                    <!--<span id="show_group" class="glyphicon glyphicon-search" style="cursor:pointer;" data-toggle="modal"-->
                          <!--data-target="#user"></span>-->

                        <!--</div>-->
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="col-md-4 control-label ">责任组:</label>
                        <div class="col-md-6">
                            <input type="text" id="exe_group" name="exe_group" class="form-control" readonly>

                        </div>
                        <!--<div id="not_show" class="col-md-1">-->
                    <!--<span  class="glyphicon glyphicon-search" style="cursor:pointer;" data-toggle="modal"-->
                          <!--data-target="#group"></span>-->
                        <!--</div>-->
                    </div>
                </div>
            </div>

            <div class="row">

                <div class="col-md-6">
                    <div class="form-group">
                        <label class="col-md-4 control-label"><span class="bt">*</span>开始时间:</label>
                        <div class="col-md-6">
                            <!--<input type="date" id="start_time" name="start_time" class="form-control"-->
                            <!--onblur="check_start_current()"/>-->
                            <!--<span class="glyphicon glyphicon-remove-sign error" id="six">开始时间必须大于当前时间</span>-->
                            <input type="date" id="start_time" name="start_time" class="form-control">
                            <span class="glyphicon glyphicon-remove-sign error" id="six">开始时间必须大于当前时间</span>
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-group">
                        <label class="col-md-3 control-label col-md-offset-1"><span class="bt">*</span>超期一级预警（小时）:</label>
                        <div class="col-md-6">
                            <!--<input type="text" id="overdue_major" name="overdue_major" class="form-control"-->
                            <!--onblur="check_overdue_major()"/>-->
                            <!--<span class="glyphicon glyphicon-remove-sign error" id="three">请输入正确数字（非零正整数)！</span>-->
                            <input type="text" id="overdue_major" name="overdue_major" class="form-control">
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="col-md-4 control-label "><span class="bt">*</span>结束时间:</label>
                        <div class="col-md-6">
                            <input type="date" id="end_time" name="end_time" class="form-control" />
                            <!--<span class="glyphicon glyphicon-remove-sign error" id="seven">结束时间必须大于开始时间</span>-->
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-group">
                        <label class="col-md-3 control-label col-md-offset-1"><span class="bt">*</span>超期二级预警（小时）:</label>
                        <div class="col-md-6">
                            <!--<input type="text" id="overdue_dept" name="overdue_dept" class="form-control"-->
                            <!--onblur="check_overdue_dept()"/>-->
                            <!--<span class="glyphicon glyphicon-remove-sign error" id="four">请输入正确数字（非零正整数)！</span>-->
                            <input type="text" id="overdue_dept" name="overdue_dept" class="form-control">
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="col-md-4 control-label "><span class="bt">*</span>周期描述:</label>
                        <div class="col-md-7" id="checkbox">
                            <input type="radio" id="checkbox1" checked="checked" class="weekend_desc" name="weekend_desc" value="小时" required/>按小时&nbsp
                            <input type="radio" id="checkbox2" class="weekend_desc" name="weekend_desc" value="天" required/>按天&nbsp
                            <input type="radio" id="checkbox3" class="weekend_desc" name="weekend_desc" value="周" required/>按周&nbsp
                            <input type="radio" id="checkbox4" class="weekend_desc" name="weekend_desc" value="月" required/>按月&nbsp
                            <input type="radio" id="checkbox5" class="weekend_desc" name="weekend_desc" value="年" required/>按年&nbsp
                            <input type="radio" id="checkbox6" class="weekend_desc" name="weekend_desc" value="一次性工作计划" required/>一次性工作计划&nbsp
                            <!--<span class="glyphicon glyphicon-remove-sign error" id="one">请输入正确数字（非零正整数)！</span>-->
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="col-md-3 control-label col-md-offset-1"><span class="bt">*</span>超期三级预警（小时）:</label>
                        <div class="col-md-6">
                            <!--<input type="text" id="overdue_leader" name="overdue_leader" class="form-control"-->
                            <!--onblur="check_overdue_leader()"/>-->
                            <!--<span class="glyphicon glyphicon-remove-sign error" id="five">请输入正确数字（非零正整数)！</span>-->
                            <input type="text" id="overdue_leader" name="overdue_leader" class="form-control">
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="col-md-4 control-label "></label>
                        <div class="col-md-6">
                            <div class="query_info">
                                <div class="form-group">
                                    <label for="time1" class="col-md-2 control-label">每</label>

                                    <div class="col-md-4">
                                        <input type="text" class="form-control num1" name="num1" id="time1">
                                    </div>
                                    <label for="time1" class="col-md-1 control-label">时</label>
                                </div>
                                <div class="form-group"><label for="time_minute1" class="col-md-2 control-label">每时</label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control num2" id="time_minute1" name="num2">
                                    </div>
                                    <label for="time_minute1" class="col-md-1 control-label">分</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <!---------------------台账和KKS编码模态框------------------------->
    <!--<div class="modal fade" id="countkks" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">-->
        <!--<div class="modal-dialog">-->
            <!--<div class="modal-content">-->
                <!--<div class="modal-header">-->
                    <!--<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>-->
                    <!--<h4 class="modal-title" id="myModalLabel">设备台账列表</h4>-->
                <!--</div>-->
                <!--<div class












                ="modal-body">-->
                    <!--<table class="table table-striped">-->
                        <!--<tr>-->
                            <!--<th>设备台账编号</th>-->
                            <!--<th>设备台账名称</th>-->
                        <!--</tr>-->
                        <!--{% for count in count_list %}-->
                        <!--<tr class="check_count">-->
                            <!--<td>{{count.number}}</td>-->
                            <!--<td>{{count.name}}</td>-->

                        <!--</tr>-->
                        <!--{% empty %}-->
                        <!--<tr>-->
                            <!--<td colspan="4">无设备台账可选择</td>-->
                        <!--</tr>-->
                        <!--{% endfor %}-->
                    <!--</table>-->
                <!--</div>-->
                <!--<div class="modal-footer">-->
                    <!--<button type="button" class="btn btn-primary" id="btn" data-dismiss="modal" aria-hidden="true">确定-->
                    <!--</button>-->
                <!--</div>-->
            <!--</div>&lt;!&ndash; /.modal-content &ndash;&gt;-->
        <!--</div>&lt;!&ndash; /.modal &ndash;&gt;-->
    <!--</div>-->
    <!--<div class="modal fade" id="kks" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">-->
        <!--<div class="modal-dialog">-->
            <!--<div class="modal-content">-->
                <!--<div class="modal-header">-->
                    <!--<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>-->
                    <!--<h4 class="modal-title" id="myModalLabe4">搜索KKS编码</h4>-->
                <!--</div>-->
                <!--&lt;!&ndash;&nbsp;&nbsp;&nbsp;&nbsp;模糊查询<input type="text" class="form-control" id="search" name="overdue_leader"style="margin-left: 5%;width: 70%"placeholder="请输入" >&ndash;&gt;-->
                <!--&lt;!&ndash;<button type="button" class="bn11" id="btn5" >搜索</button>&ndash;&gt;-->


                <!--<div class="col-lg-6">-->

    <!--<div class="input-group">-->
      <!--<input type="text" class="form-control" id="search" name="overdue_leader" placeholder="请输入">-->
      <!--<span class="input-group-btn">-->
        <!--<button class="btn btn-default" id="btn5" type="button">搜索</button>-->
      <!--</span>-->
    <!--</div>&lt;!&ndash; /input-group &ndash;&gt;-->
  <!--</div>&lt;!&ndash; /.col-lg-6 &ndash;&gt;-->




                <!--<div class="modal-body">-->
                    <!--&lt;!&ndash;<table class="table table-striped">&ndash;&gt;-->
                        <!--&lt;!&ndash;<tr>&ndash;&gt;-->
                            <!--&lt;!&ndash;<th>KKS编码</th>&ndash;&gt;-->
                            <!--&lt;!&ndash;<th>KKS编码名称</th>&ndash;&gt;-->
                        <!--&lt;!&ndash;</tr>&ndash;&gt;-->
                        <!--&lt;!&ndash;{% for kks in kks_list %}&ndash;&gt;-->
                        <!--&lt;!&ndash;<tr class="check_kks">&ndash;&gt;-->
                            <!--&lt;!&ndash;<td>{{kks.KKS_code}}</td>&ndash;&gt;-->
                            <!--&lt;!&ndash;<td>{{kks.KKS_codename}}</td>&ndash;&gt;-->
                        <!--&lt;!&ndash;</tr>&ndash;&gt;-->
                        <!--&lt;!&ndash;{% empty %}&ndash;&gt;-->
                        <!--&lt;!&ndash;<tr>&ndash;&gt;-->
                            <!--&lt;!&ndash;<td colspan="4">无kks可选择</td>&ndash;&gt;-->
                        <!--&lt;!&ndash;</tr>&ndash;&gt;-->
                        <!--&lt;!&ndash;{% endfor %}&ndash;&gt;-->
                    <!--&lt;!&ndash;</table>&ndash;&gt;-->
                   <!--<br> <br>搜索结果-->
                     <!--<<select class="form-control js-example-basic-single select2" onchange="kks_change()" name="KKS_code" id="KKS_code1" >&ndash;&gt;-->

                        <!--&lt;!&ndash;&lt;!&ndash;<option value="0"></option>&ndash;&gt;&ndash;&gt;-->
                        <!--&lt;!&ndash;&lt;!&ndash;{% for kks in kks_list %}&ndash;&gt;&ndash;&gt;-->
                        <!--&lt;!&ndash;&lt;!&ndash;<option value="{{ kks.id }}" kks_codename="{{ kks.KKS_codename }}" >{{kks.KKS_code}}({{ kks.KKS_codename }})&ndash;&gt;&ndash;&gt;-->
                        <!--&lt;!&ndash;&lt;!&ndash;</option>&ndash;&gt;&ndash;&gt;-->
                        <!--&lt;!&ndash;&lt;!&ndash;{% empty %}&ndash;&gt;&ndash;&gt;-->
                            <!--&lt;!&ndash;&lt;!&ndash;{% endfor %}&ndash;&gt;&ndash;&gt;-->
                    <!--<</select>-->
                    <!--&lt;!&ndash;<input type="text" class="form-control" name="KKS_code" id="kks_name" readonly>&ndash;&gt;-->
                <!--<div class="modal-footer">-->
                    <!--<button type="button" class="btn btn-primary" id="btn4" data-dismiss="modal" aria-hidden="true">确定-->
                    <!--</button>-->
                <!--</div>-->
            <!--</div>&lt;!&ndash; /.modal-content &ndash;&gt;-->
                <!--</div>&lt;!&ndash; /.modal &ndash;&gt;-->
    <!--</div>-->

    <!--&lt;!&ndash;-&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;责任组模态框-&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&ndash;&gt;-->
    <!--&lt;!&ndash;<div class="modal fade" id="group" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">&ndash;&gt;-->
        <!--&lt;!&ndash;<div class="modal-dialog">&ndash;&gt;-->
            <!--&lt;!&ndash;<div class="modal-content">&ndash;&gt;-->
                <!--&lt;!&ndash;<div class="modal-header">&ndash;&gt;-->
                    <!--&lt;!&ndash;<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>&ndash;&gt;-->
                    <!--&lt;!&ndash;<h4 class="modal-title" id="myModalgroup">人员列表</h4>&ndash;&gt;-->
                <!--&lt;!&ndash;</div>&ndash;&gt;-->
                <!--&lt;!&ndash;<div class="modal-body">&ndash;&gt;-->
                    <!--&lt;!&ndash;<table class="table table-striped">&ndash;&gt;-->
                        <!--&lt;!&ndash;<tr>&ndash;&gt;-->
                            <!--&lt;!&ndash;<th>责任组编号</th>&ndash;&gt;-->
                            <!--&lt;!&ndash;<th>责任组</th>&ndash;&gt;-->
                        <!--&lt;!&ndash;</tr>&ndash;&gt;-->
                        <!--&lt;!&ndash;{% for group in group_list %}&ndash;&gt;-->
                        <!--&lt;!&ndash;<tr class="check_group">&ndash;&gt;-->
                            <!--&lt;!&ndash;<td>{{group.number}}</td>&ndash;&gt;-->
                            <!--&lt;!&ndash;<td>{{group.name}}</td>&ndash;&gt;-->
                        <!--&lt;!&ndash;</tr>&ndash;&gt;-->
                        <!--&lt;!&ndash;{% empty %}&ndash;&gt;-->
                        <!--&lt;!&ndash;<tr>&ndash;&gt;-->
                            <!--&lt;!&ndash;<td colspan="2">无责任组可选择</td>&ndash;&gt;-->
                        <!--&lt;!&ndash;</tr>&ndash;&gt;-->
                        <!--&lt;!&ndash;{% endfor %}&ndash;&gt;-->
                    <!--&lt;!&ndash;</table>&ndash;&gt;-->
                <!--&lt;!&ndash;</div>&ndash;&gt;-->
                <!--&lt;!&ndash;<div class="modal-footer">&ndash;&gt;-->
                    <!--&lt;!&ndash;<button type="button" class="btn btn-primary" id="btn5" data-dismiss="modal" aria-hidden="true">确定&ndash;&gt;-->
                    <!--&lt;!&ndash;</button>&ndash;&gt;-->
                <!--&lt;!&ndash;</div>&ndash;&gt;-->
            <!--&lt;!&ndash;</div>&lt;!&ndash; /.modal-content &ndash;&gt;&ndash;&gt;-->
        <!--&lt;!&ndash;</div>&lt;!&ndash; /.modal &ndash;&gt;&ndash;&gt;-->
    <!--&lt;!&ndash;</div>&ndash;&gt;-->
    <!--&lt;!&ndash;-&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;责任人模态框-&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&ndash;&gt;-->
    <!--&lt;!&ndash;<div class="modal fade" id="user" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">&ndash;&gt;-->
        <!--&lt;!&ndash;<div class="modal-dialog">&ndash;&gt;-->
            <!--&lt;!&ndash;<div class="modal-content">&ndash;&gt;-->
                <!--&lt;!&ndash;<div class="modal-header">&ndash;&gt;-->
                    <!--&lt;!&ndash;<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>&ndash;&gt;-->
                    <!--&lt;!&ndash;<h4 class="modal-title" id="myModalLa">人员列表</h4>&ndash;&gt;-->
                <!--&lt;!&ndash;</div>&ndash;&gt;-->
                <!--&lt;!&ndash;<div class="modal-body">&ndash;&gt;-->
                    <!--&lt;!&ndash;<table class="table table-striped">&ndash;&gt;-->
                        <!--&lt;!&ndash;<tr>&ndash;&gt;-->
                            <!--&lt;!&ndash;<th>责任人编号</th>&ndash;&gt;-->
                            <!--&lt;!&ndash;<th>姓名</th>&ndash;&gt;-->
                            <!--&lt;!&ndash;<th>部门</th>&ndash;&gt;-->
                            <!--&lt;!&ndash;<th>责任组</th>&ndash;&gt;-->
                        <!--&lt;!&ndash;</tr>&ndash;&gt;-->
                        <!--&lt;!&ndash;{% for user in user_list %}&ndash;&gt;-->
                        <!--&lt;!&ndash;<tr class="check_user">&ndash;&gt;-->
                            <!--&lt;!&ndash;<td>{{user.number}}</td>&ndash;&gt;-->
                            <!--&lt;!&ndash;<td>{{user.name}}</td>&ndash;&gt;-->
                            <!--&lt;!&ndash;<td>{{user.department}}</td>&ndash;&gt;-->
                            <!--&lt;!&ndash;<td>{{user.group}}</td>&ndash;&gt;-->
                        <!--&lt;!&ndash;</tr>&ndash;&gt;-->
                        <!--&lt;!&ndash;{% empty %}&ndash;&gt;-->
                        <!--&lt;!&ndash;<tr>&ndash;&gt;-->
                            <!--&lt;!&ndash;<td colspan="4">无责任人可选择</td>&ndash;&gt;-->
                        <!--&lt;!&ndash;</tr>&ndash;&gt;-->
                        <!--&lt;!&ndash;{% endfor %}&ndash;&gt;-->
                    <!--&lt;!&ndash;</table>&ndash;&gt;-->
                <!--&lt;!&ndash;</div>&ndash;&gt;-->
                <!--&lt;!&ndash;<div class="modal-footer">&ndash;&gt;-->
                    <!--&lt;!&ndash;<button type="button" class="btn btn-primary" id="btn3" data-dismiss="modal" aria-hidden="true">确定&ndash;&gt;-->
                    <!--&lt;!&ndash;</button>&ndash;&gt;-->
                <!--&lt;!&ndash;</div>&ndash;&gt;-->

            <!--&lt;!&ndash;</div>&lt;!&ndash; /.modal-content &ndash;&gt;&ndash;&gt;-->
        <!--&lt;!&ndash;</div>&lt;!&ndash; /.modal &ndash;&gt;&ndash;&gt;-->
    <!--&lt;!&ndash;</div>&ndash;&gt;-->
    <!--{% endblock %}-->
    <!--<div style="position:fixed;top:0;right:0;left:0;bottom:0;width:100%;height:100%;background:#000000;opacity: .5;display:none;" id="mask"></div>-->
    <!--<div class="tan_box"  style="display:none;">-->
        <!--<div class="top-title">-->
            <!--<div class="left">-->
                <!--<p>位置或描述搜索</p>-->
                <!--<input type="text" class="form_control" id="search"-->
                <!--name="overdue_leader" placeholder="请输入">-->
                <!--<button id="search_content">搜索</button>-->
            <!--</div>-->
        <!--</div>-->
        <!--<div class="content_table">-->
            <!--<table cellspacing="0" class="table_main">-->
                    <!--&lt;!&ndash;<tr>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td width="196" class="number">111111</td>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td class="main" >222222222222222222222</td>&ndash;&gt;-->
                    <!--&lt;!&ndash;</tr>&ndash;&gt;-->
                    <!--&lt;!&ndash;<tr>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td width="196" class="number">111111</td>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td class="main" >222222222222222222222</td>&ndash;&gt;-->
                    <!--&lt;!&ndash;</tr>&ndash;&gt;-->
                    <!--&lt;!&ndash;<tr>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td width="196" class="number">111111</td>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td class="main" >222222222222222222222</td>&ndash;&gt;-->
                    <!--&lt;!&ndash;</tr>&ndash;&gt;-->
                    <!--&lt;!&ndash;<tr>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td width="196" class="number">111111</td>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td class="main" >222222222222222222222</td>&ndash;&gt;-->
                    <!--&lt;!&ndash;</tr>&ndash;&gt;-->
                    <!--&lt;!&ndash;<tr>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td width="196" class="number">111111</td>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td class="main" >222222222222222222222</td>&ndash;&gt;-->
                    <!--&lt;!&ndash;</tr>&ndash;&gt;-->
                    <!--&lt;!&ndash;<tr>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td width="196" class="number">111111</td>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td class="main" >222222222222222222222</td>&ndash;&gt;-->
                    <!--&lt;!&ndash;</tr>&ndash;&gt;-->
                    <!--&lt;!&ndash;<tr>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td width="196" class="number">111111</td>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td class="main" >222222222222222222222</td>&ndash;&gt;-->
                    <!--&lt;!&ndash;</tr>&ndash;&gt;-->
                    <!--&lt;!&ndash;<tr>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td width="196" class="number">111111</td>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td class="main" >222222222222222222222</td>&ndash;&gt;-->
                    <!--&lt;!&ndash;</tr>&ndash;&gt;-->
                    <!--&lt;!&ndash;<tr>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td width="196" class="number">111111</td>&ndash;&gt;-->
                        <!--&lt;!&ndash;<td class="main" >222222222222222222222</td>&ndash;&gt;-->
                    <!--&lt;!&ndash;</tr>&ndash;&gt;-->
            <!--</table>-->
        <!--</div>-->
        <!--<div style="width:300px;margin:0 auto;">-->
            <!--<ul id="pagination_b" class="pagination-sm" >-->
            <!--</ul>-->
        <!--</div>-->

        <!--<button class="close_btn">关闭</button>-->
    <!--</div>-->
</section>
<div style="position:fixed;top:0;right:0;left:0;bottom:0;width:100%;height:100%;background:#000000;opacity: .5;display:none;" id="mask"></div>
<div class="tan_box"  style="display:none;">
        <div class="top-title">
            <div class="left">
                <p>搜索KKS编码</p>
                <input type="text" class="form_control" id="search"
                name="overdue_leader" placeholder="请输入位置或描述">
                <button id="search_content">搜索</button>
            </div>
        </div>
        <div class="content_table">
            <table cellspacing="0" class="table_main">
                    <!--<tr>-->
                        <!--<td width="196" class="number">111111</td>-->
                        <!--<td class="main" >222222222222222222222</td>-->
                    <!--</tr>-->
                    <!--<tr>-->
                        <!--<td width="196" class="number">111111</td>-->
                        <!--<td class="main" >222222222222222222222</td>-->
                    <!--</tr>-->
                    <!--<tr>-->
                        <!--<td width="196" class="number">111111</td>-->
                        <!--<td class="main" >222222222222222222222</td>-->
                    <!--</tr>-->
                    <!--<tr>-->
                        <!--<td width="196" class="number">111111</td>-->
                        <!--<td class="main" >222222222222222222222</td>-->
                    <!--</tr>-->
                    <!--<tr>-->
                        <!--<td width="196" class="number">111111</td>-->
                        <!--<td class="main" >222222222222222222222</td>-->
                    <!--</tr>-->
                    <!--<tr>-->
                        <!--<td width="196" class="number">111111</td>-->
                        <!--<td class="main" >222222222222222222222</td>-->
                    <!--</tr>-->
                    <!--<tr>-->
                        <!--<td width="196" class="number">111111</td>-->
                        <!--<td class="main" >222222222222222222222</td>-->
                    <!--</tr>-->
                    <!--<tr>-->
                        <!--<td width="196" class="number">111111</td>-->
                        <!--<td class="main" >222222222222222222222</td>-->
                    <!--</tr>-->
                    <!--<tr>-->
                        <!--<td width="196" class="number">111111</td>-->
                        <!--<td class="main" >222222222222222222222</td>-->
                    <!--</tr>-->
            </table>
        </div>
        <div style="width:300px;margin:0 auto;">
            <ul id="pagination_b" class="pagination-sm" >
            </ul>
        </div>

        <button class="close_btn">关闭</button>
    </div>
{% endblock %}
{% endblock %}

{% block javascript %}

<script type="application/javascript" src="/static/js/bootstrapValidator/bootstrapValidator.js"></script>
<script type="text/javascript" src="/static/twbs-pagination/jquery.twbsPagination.js"></script>
<script type="text/javascript">

    $(document).ready(function(){
        $('.glyphicon-search').click(function(){
            $('#mask').css('display','block')
            $('.tan_box').css('display','block')
        })
        $('.close_btn').click(function(){
            $('#mask').css('display','none')
            $('.tan_box').css('display','none')
        })
        // // kks及责任人搜索
        // $('.js-example-basic-single').select2();
        // // 判断kks编码是否存在，存在则将查询到的第一个kks编码的名称传如kks编码名称框中
        // if(document.getElementById("KKS_code").options[0]){
        //     document.getElementById("KKS_codename").value = document.getElementById("KKS_code").options[0].getAttribute("kks_codename");
        // }
        // 判断责任人是否存在，存在则将查询到的第一个责任人所在责任组传入责任组框中
        if(document.getElementById("exe_user").options[0]) {
            document.getElementById("exe_group").value = document.getElementById("exe_user").options[0].getAttribute("group");
        }
    });
    // 根据kks编码的变化，修改kks编码名称
    // function kks_change(){
    //     var kks_obj = document.getElementById("KKS_code");
    //     var kks_index = kks_obj.selectedIndex;
    //
    //     document.getElementById("KKS_codename").value = kks_obj.options[kks_index].getAttribute("kks_codename");
    // }

    // 根据责任人的变化，修改责任组里面的数据
    function change(){
        var obj = document.getElementById("exe_user");
        var index = obj.selectedIndex;
        console.log(index);
        document.getElementById("exe_group").value = obj.options[index].getAttribute("group");
    }
    // $(".check_kks").click(function(){
    //     // 选中某条数据，变为蓝色
    //     $(this).css("background-color","skyblue");
    //     //  其他同级元素为白色
    //     $(this).siblings().css("background-color","white");
    //     // 获取选中的td的值
    //     var $KKS_code = $(this).children("td:first").text();
    //     var $KKS_codename = $(this).children("td:first").next().text();
    //     $("#btn4").click(function(){
    //         // 接受数据并写入页面
    //         $("#KKS_code").val($KKS_code);
    //         $("#KKS_codename").val($KKS_codename);
    //     });
    //
    // });


    //责任组
    // $(".check_group").click(function(){
    //     // 选中某条数据，变为蓝色
    //     $(this).css("background-color","skyblue");
    //     //  其他同级元素为白色
    //     $(this).siblings().css("background-color","white");
    //     // 获取选中的td的值
    //     var $number = $(this).children("td:first").text();
    //     var $name = $(this).children("td:first").next().text();
    //
    //     $("#btn5").click(function(){
    //         // 接受数据并写入页面
    //         $("#exe_user").val('');
    //         $("#exe_group").val($name);
    //     });
    //
    // });
    //责任人
    // $(".check_user").click(function(){
    //     // 选中某条数据，变为蓝色
    //     $(this).css("background-color","skyblue");
    //     //  其他同级元素为白色
    //     $(this).siblings().css("background-color","white");
    //     // 获取选中的td的值
    //     var $number = $(this).children("td:first").text();
    //     var $name = $(this).children("td:first").next().text();
    //     var $department = $(this).children("td:first").next().next().text();
    //     var $group = $(this).children("td:first").next().next().next().text();
    //
    //     $("#btn3").click(function(){
    //         // 接受数据并写入页面
    //         $("#exe_user").val($name);
    //         $("#exe_dept").val($department);
    //         $("#exe_group").val($group);
    //     });
    //
    // });

    $(function () {
        $('#id-m-form').bootstrapValidator({
            message: 'This value is not valid',
            url:'/regularwork/checktwo/',
            data:{'num':1},
            type:'POST',
            feedbackIcons: {
                valid: 'glyphicon glyphicon-ok',
                invalid: 'glyphicon glyphicon-remove',
                validating: 'glyphicon glyphicon-refresh'
            },
            fields: {
                work_content: {
                    validators: {
                        notEmpty: {
                            message: '请您输入项目描述信息'
                        },
                        callback: {
                            message: '项目描述信息错误'
                        }
                    }
                },
                score: {
                    validators: {
                        // notEmpty: {
                        //     message: '请您输入标准分值'
                        // },
                        callback: {
                            message: '标准分支错误'
                        },
                        regexp: {//正则验证
                            regexp: /^[1-9]\d*$/,
                            message: '请输入正确数字(非零正数)!'
                        },
                    }
                },
                num: {
                    validators: {
                        notEmpty: {
                            message: '请您输入周期描述'
                        },
                        callback: {
                            message: '周期描述错误'
                        },
                        regexp: {//正则验证
                            regexp: /^[1-9]\d*$/,
                            message: '请输入正确数字(非零正数)!'
                        },
                    }
                },
                warinig_time: {
                    validators: {
                        notEmpty: {
                            message: '请您输入提前提醒时间'
                        },
                        callback: {
                            message: '提前提醒时间错误'
                        },
                        regexp: {//正则验证
                            regexp: /^[1-9]\d*$/,
                            message: '请输入正确数字(非零正数)!'
                        },
                    }
                },
                overdue_major: {
                    validators: {
                        notEmpty: {
                            message: '请您输入超期一级预警'
                        },
                        callback: {
                            message: '超期一级预警错误'
                        },
                        regexp: {//正则验证
                            regexp: /^[1-9]\d*$/,
                            message: '请输入正确数字(非零正数)!'
                        },
                    }
                },
                start_time: {
                    validators: {
                        notEmpty: {
                            message: '请选择开始时间'
                        },
                        callback: {
                            message: '开始时间必须大于当前时间',
                            callback: function (value, validator, $start_time) {
                                let other = validator.getFieldElements('start_time').val();//获得开始时间的值

                                let start = new Date(other.replace("-", "/").replace("-", "/"));
                                let d = new Date();// 当前时间

                                if (start >= d) {
                                    return true;
                                }
                                return false;
                            }
                        },
                    }
                },
                overdue_dept: {
                    validators: {
                        notEmpty: {
                            message: '请您输入超期二级预警'
                        },
                        callback: {
                            message: '超期二级预警错误'
                        },
                        regexp: {//正则验证
                            regexp: /^[1-9]\d*$/,
                            message: '请输入正确数字(非零正数)!'
                        },
                    }
                },
                // end_time: {
                //     validators: {
                //         notEmpty: {
                //             message: '请选择结束时间'
                //         },
                //         callback:{
                //             message: '结束时间必须大于开始时间',
                //             //开始时间与结束时间的校验
                //             callback: function (value, validator, $start_time) {
                //                 let other = validator.getFieldElements('start_time').val();//获得开始时间的值
                //
                //                 let start = new Date(other.replace("-", "/").replace("-", "/"));
                //                 let end = new Date(value.replace("-", "/").replace("-", "/"));
                //
                //                 if (start <= end) {
                //                     return true;
                //                 }
                //                 return false;
                //             }
                //         },
                //     }
                // },
                overdue_leader: {
                    validators: {
                        notEmpty: {
                            message: '请您输入超期三级预警'
                        },
                        callback: {
                            message: '超期三级预警错误'
                        },
                        regexp: {//正则验证
                            regexp: /^[1-9]\d*$/,
                            message: '请输入正确数字(非零正数)!'
                        },
                    }
                },
                checkbox:{// 处理周期描述
                    validators: {
                        notEmpty: {
                            message: '请您选择周期描述'
                        },
                        callback: {
                            message: '周期描述错误'
                        },

                    }
                },
                num1:{
                    validators: {
                        callback:{
                            message: '输入错误'
                        },
                        regexp: {//正则验证
                            regexp: /^[1-9]\d*$/,
                            message: '请输入正确数字(非零正数)!'
                    },
                }
               },
                num2:{
                    validators: {
                        callback:{
                            message: '输入错误'
                        },
                        regexp: {//正则验证
                            regexp: /^[1-9]\d*$/,
                            message: '请输入正确数字(非零正数)!'
                    },
                }
               },
            }
        })
    });

    $("#id-m-form").submit(function (ev) {
        ev.preventDefault();
    });
    $("#create_btn").on("click", function () {
        var bootstrapValidator = $("#id-m-form").data('bootstrapValidator');
        bootstrapValidator.validate();
        if (bootstrapValidator.isValid()) {
            document.getElementById('id-m-form').submit();
            layer.msg('添加成功！')
        }
        else {
            layer.msg('添加失败，请填写正确信息!');
            return false;
        }
    });

    // 按钮悬浮效果
    $("[data-toggle='tooltip']").tooltip();

    $("#checkbox1").click(function(){
        var s=$("#checkbox1").is(":checked");
        if(s){
            $text='<div class="form-group">\n' +
                '                                <label for="time1" class="col-md-2 control-label">每</label>\n' +
                '                                <div class="col-md-4">\n' +
                '                                  <input type="text" class="form-control num1" name="num1" id="time1" >\n' +
                '                                </div>\n' +
                '                                <label for="time1" class="col-md-1 control-label">时</label>\n' +
                '                              </div>\n' +
                '                              <div class="form-group">\n' +
                '                                <label for="time_minute1" class="col-md-2 control-label">每时</label>\n' +
                '                                <div class="col-md-4">\n' +
                '                                  <input type="text" class="form-control num2" id="time_minute1" name="num2">\n' +
                '                                </div>\n' +
                '                                <label for="time_minute1" class="col-md-1 control-label">分</label>\n' +
                '                              </div>';
            $('.query_info').html($text);
            $("#checkbox2").removeAttr("checked");
            $("#checkbox3").removeAttr("checked");
            $("#checkbox4").removeAttr("checked");
            $("#checkbox5").removeAttr("checked");
            $("#checkbox6").removeAttr("checked");

            $('#id-m-form').bootstrapValidator('addField', 'num1', {
                validators: {
                     regexp: {//正则验证
                            regexp: /^[1-9]\d*$/,
                            message: '请输入正确数字(非零正数)!'
                        },
                }
            });
            $('#id-m-form').bootstrapValidator('addField', 'num2', {
                validators: {
                    regexp: {//正则验证
                        regexp: /^[1-9]\d*$/,
                        message: '请输入正确数字(非零正数)!'
                    },
                }
            });
        }
    });

    $("#checkbox2").click(function(){
        var s=$("#checkbox2").is(":checked");
        if(s){
            $text='<div class="form-group">\n' +
                '                                <label for="day1" class="col-md-2 control-label">每</label>\n' +
                '                                <div class="col-md-4">\n' +
                '                                  <input type="text" class="form-control num1" name="num1" id="day1" >\n' +
                '                                </div>\n' +
                '                                <label for="day1" class="col-md-1 control-label">天</label>\n' +
                '                              </div>\n' +
                '                              <div class="form-group">\n' +
                '                                <label for="time2" class="col-md-2 control-label">每天</label>\n' +
                '                                <div class="col-md-4">\n' +
                '                                  <input type="text" class="form-control num2" id="time2" name="num2">\n' +
                '                                </div>\n' +
                '                                <label for="time2" class="col-md-1 control-label">时</label>\n' +
                '                              </div>';
            $('.query_info').html($text);
            $("#checkbox1").removeAttr("checked");
            $("#checkbox3").removeAttr("checked");
            $("#checkbox4").removeAttr("checked");
            $("#checkbox5").removeAttr("checked");
            $("#checkbox6").removeAttr("checked");

            $('#id-m-form').bootstrapValidator('addField', 'num1', {
                validators: {
                     regexp: {//正则验证
                            regexp: /^[1-9]\d*$/,
                            message: '请输入正确数字(非零正数)!'
                        },
                }
            });
            $('#id-m-form').bootstrapValidator('addField', 'num2', {
                validators: {
                     regexp: {//正则验证
                            regexp: /^[1-9]\d*$/,
                            message: '请输入正确数字(非零正数)!'
                        },
                }
            });
        }
    });
    $("#checkbox3").click(function(){


        var s=$("#checkbox3").is(":checked");
        if(s){
            $text=' <div class="form-group">\n' +
                '                                <label for="week1" class="col-md-2 control-label">每</label>\n' +
                '                                <div class="col-md-4">\n' +
                '                                  <input type="text" class="form-control num1" name="num1" id="week1">\n' +
                '                                </div>\n' +
                '                                <label for="week1" class="col-md-1 control-label">周</label>\n' +
                '                                </div>\n' +
                '                                <div class="form-group">\n' +
                '                                <label for="week1" class="col-md-2 control-label">每周</label>\n' +
                '                                    <div class="col-md-9">\n' +
                '                                    <input type="checkbox" id="check1" class="num2" name="num2" value="1"/>星期一&nbsp\n' +
                '                                    <input type="checkbox" id="check2" class="num2" name="num2" value="2" />星期二&nbsp\n' +
                '                                    <input type="checkbox" id="check3" class="num2" name="num2" value="3"/>星期三&nbsp\n' +
                '                                    <input type="checkbox" id="check4" class="num2" name="num2" value="4"/>星期四&nbsp\n' +
                '                                    </div>\n' +
                '                                    <div class="col-md-9">\n' +
                '                                    <input type="checkbox" id="check5" class="num2" name="num2" value="5"/>星期五&nbsp\n' +
                '                                    <input type="checkbox" id="check6" class="num2" name="num2" value="6"/>星期六&nbsp\n' +
                '                                    <input type="checkbox" id="check7" class="num2" name="num2" value="0"/>星期天&nbsp\n' +
                '                                    </div>\n' +
                '                                <div class="col-md-8">\n' +
                '\n' +
                '                                </div>\n' +
                '\n' +
                '                              </div>';
            $('.query_info').html($text);
            $("#checkbox1").removeAttr("checked");
            $("#checkbox2").removeAttr("checked");
            $("#checkbox4").removeAttr("checked");
            $("#checkbox5").removeAttr("checked");
            $("#checkbox6").removeAttr("checked");

            $('#id-m-form').bootstrapValidator('addField', 'num1', {
                validators: {
                     regexp: {//正则验证
                            regexp: /^[1-9]\d*$/,
                            message: '请输入正确数字(非零正数)!'
                        },
                }
            });
            $('#id-m-form').bootstrapValidator('addField', 'num2', {
                validators: {
                     regexp: {//正则验证
                            regexp: /^[1-9]\d*$/,
                            message: '请输入正确数字(非零正数)!'
                        },
                }
            });
        }
    });
    $("#checkbox4").click(function(){
        var s=$("#checkbox4").is(":checked");
        if(s){
            $text='<div class="form-group">\n' +
                '                                <label for="year1" class="col-md-2 control-label">每</label>\n' +
                '                                <div class="col-md-4">\n' +
                '                                  <input type="text" class="form-control num1" name="num1" id="year1" >\n' +
                '                                </div>\n' +
                '                                <label for="year1" class="col-md-1 control-label">月</label>\n' +
                '                              </div>\n' +
                '                              <div class="form-group">\n' +
                '                                <label for="year_month1" class="col-md-2 control-label">每月</label>\n' +
                '                                <div class="col-md-4">\n' +
                '                                  <input type="text" class="form-control num2" id="year_month1" name="num2" >\n' +
                '                                </div>\n' +
                '                                <label for="year_month1" class="col-md-1 control-label">日</label>\n' +
                '                              </div>';
            $('.query_info').html($text);
            $("#checkbox1").removeAttr("checked");
            $("#checkbox2").removeAttr("checked");
            $("#checkbox3").removeAttr("checked");
            $("#checkbox5").removeAttr("checked");
            $("#checkbox6").removeAttr("checked");

            $('#id-m-form').bootstrapValidator('addField', 'num1', {
                validators: {
                     regexp: {//正则验证
                            regexp: /^[1-9]\d*$/,
                            message: '请输入正确数字(非零正数)!'
                        },
                }
            });
            $('#id-m-form').bootstrapValidator('addField', 'num2', {
                validators: {
                     regexp: {//正则验证
                            regexp: /^[1-9]\d*$/,
                            message: '请输入正确数字(非零正数)!'
                        },
                }
            });
        }
    });
    $("#checkbox5").click(function(){
        var s=$("#checkbox5").is(":checked");
        if(s){
            $text='<div class="form-group">\n' +
                '                                <label for="year1" class="col-md-2 control-label">每</label>\n' +
                '                                <div class="col-md-4">\n' +
                '                                  <input type="text" class="form-control num1" name="num1" id="year1" >\n' +
                '                                </div>\n' +
                '                                <label for="year1" class="col-md-1 control-label">年</label>\n' +
                '                              </div>\n' +
                '                              <div class="form-group">\n' +
                '                                <label for="year_month1" class="col-md-2 control-label">每年</label>\n' +
                '                                <div class="col-md-4">\n' +
                '                                  <input type="text" class="form-control num2" id="year_month1" name="num2" >\n' +
                '                                </div>\n' +
                '                                <label for="year_month1" class="col-md-1 control-label">月</label>\n' +
                '                              </div>';
            $('.query_info').html($text);
            $("#checkbox1").removeAttr("checked");
            $("#checkbox2").removeAttr("checked");
            $("#checkbox3").removeAttr("checked");
            $("#checkbox4").removeAttr("checked");
            $("#checkbox6").removeAttr("checked");
            $('#id-m-form').bootstrapValidator('addField', 'num1', {
                validators: {
                     regexp: {//正则验证
                            regexp: /^[1-9]\d*$/,
                            message: '请输入正确数字(非零正数)!'
                        },
                }
            });
            $('#id-m-form').bootstrapValidator('addField', 'num2', {
                validators: {
                     regexp: {//正则验证
                            regexp: /^[1-9]\d*$/,
                            message: '请输入正确数字(非零正数)!'
                        },
                }
            });
        }
    });
    $("#checkbox6").click(function(){
        var s=$("#checkbox6").is(":checked");
        if(s){
            $text=' <div>\n' +
                '                    <input name="num1" style="display:none">\n' +
                '                    <input name="num2" style="display:none">\n' +
                '                </div>';
            $('.query_info').html($text);
            $("#checkbox1").removeAttr("checked");
            $("#checkbox2").removeAttr("checked");
            $("#checkbox3").removeAttr("checked");
            $("#checkbox4").removeAttr("checked");
            $("#checkbox5").removeAttr("checked");
        }
    });
    // $(document).ready(function(e) {
    // $("#exe_user").click(function(e) {
    //     $("#not_show").toggle();
    // });
    // });


    // 显示责任组和责任人
    // $("#show_group").click(function(){
    //     $("#not_show").hide();
    // });
    // $("#not_show").click(function(){
    //     $("#show_group").hide();
    // });
</script>
<script >
    $(document).ready(function(){
    var param;
    var html;
    $("#btn5").click(function(){
        var search1 = $("#search").val();
    });
    //輸入框
    $('#search_content').click(function(){
      var search1 = $("#search").val();
      if(search1==""){
           $('.table_main').html("");
           return
      }else{
        search(search1)
      }

  })
    //獲取數據
    function search(data){
            $.ajax({
             type: "POST",
             url: "/regularworkplan/search_kks/",
             data: data,
             dataType: "json",
             success: function(data){
                param = data;
                $("#KKS_code1").empty();
                 if(data.kks_list.length!=0){
                    	var pageSize=10;//一页显示条数
                        function generateList(page,data) {
                            var start = (page - 1) * pageSize;
                            var end = (page - 1) * pageSize + pageSize;
                            var html = ''
                            if (end > data.length) {
                                end = data.length
                            }
                            for (var i = start; i < end; i++) {
                                html += `<tr>
                                            <td class="number">` + data.kks_list[i].kks_code + `</td>
                                            <td class="main" >` + data.kks_list[i].kks_codename + `</td>
                                        </tr>`
                            }
                            $('.table_main').html(html);
                             add_content()
                        }
                        $('#pagination_b').twbsPagination({
                                totalPages:data.kks_list.length/10,
                                visiblePages: 5,
                                first: "首頁",
                                last: "末頁",
                                prev:'&lt;',
                                next:'&gt;',
                                onPageClick: function (event, page) {
                                    generateList(page,param)

                                }
                    });

                 }
             }
         });
      }
    //增加內容
    function add_content(){
                var tr = document.querySelectorAll('.table_main tr')
                for(let t = 0;t<tr.length;t++){
                    tr[t].index = t;
                    tr[t].onclick = function(){
                  var num=  tr[t].childNodes[1].innerHTML
                  var content=  tr[t].childNodes[3].innerHTML
                    $("#KKS_code").val(num);
                    $("#KKS_codename").val(content);
                    $('#mask').css('display','none')
                    $('.tan_box').css('display','none')

                    for(let i = 0;i<tr.length;i++){

                        tr[i].className='';
                    }
                    this.className = 'color'
                }
                }

    }


});
</script>
<script >
    $("#btn4").click(function(){
            // 接受数据并写入页面
         var check = $("#KKS_code1 ").val();
         var str = $("#KKS_code1").find("option:selected").text();
         var split_str = str.split(' ');
            $("#KKS_code").val(check);
            $("#KKS_codename").val(split_str[1]);
        });
</script>
{% endblock %}



